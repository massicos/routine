<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Routine - Tests</title>
        <link rel="stylesheet" href="css/qunit.css">
        <script src="js/qunit.js"></script>
        <script src="../www/js/lib/jquery.min.js"></script>
        <script src="../www/js/itemRoutine.js"></script>
        <script src="../www/js/routine.js"></script>
        <script>
            var p = false;

            module("module A", {
                setup: function() {
                   p = new Routine("Léanne", 0, 1, 2, 3);
                },
                teardown: function() {
// clean up after each test 
                }
            });

            test("Routine constructeur 1", function() {
                equal(p.getPrenom(), "Léanne");
                p.setPrenom("Charles");
                equal(p.getPrenom(), "Charles");
            });

            test("Routine constructeur 2", function() {
                equal(p.getPrenomNormalise(), "leanne");
                p.setPrenom("Charles");
                equal(p.getPrenomNormalise(), "charles");
            });

            test("Routine photo", function() {
            	equal(p.getPhoto(), false);

                p.setPhoto("images/photo1.jpg");
                equal(p.getPhoto(), "images/photo1.jpg");
            });

            test("Routine dateFinRoutine", function() {
            	equal(p.getDateFin(), false);
                var dateFin = new Date(1993, 06, 09, 21, 00);

                p.setDateFin(dateFin);
                equal(p.getDateFin(), dateFin);
            });

            test("Routine getNbrItemRoutine 0", function() {
            	equal(p.getNbrItemRoutine(), 0);
            });

            test("Routine getNbrItemRoutine 1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	equal(p.getNbrItemRoutine(), 1);
            });

            test("Routine getNbrItemRoutine 2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	equal(p.getNbrItemRoutine(), 2);
            });

            test("Routine getTotalTempsItemsRoutine 0", function() {
            	equal(p.getTotalTempsItemsRoutine(), 0);
            });

            test("Routine getTotalTempsItemsRoutine 1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	equal(p.getTotalTempsItemsRoutine(), 15);
            });

            test("Routine getTotalTempsItemsRoutine 2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	equal(p.getTotalTempsItemsRoutine(), 32);
            });

            test("Routine getTotalTempsItemsRoutineNonCompletes 0", function() {
            	equal(p.getTotalTempsItemsRoutineNonCompletes(), 0);
            });

            test("Routine getTotalTempsItemsRoutineNonCompletes 1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	equal(p.getTotalTempsItemsRoutineNonCompletes(), 15);
            });

            test("Routine getTotalTempsItemsRoutineNonCompletes 2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	equal(p.getTotalTempsItemsRoutineNonCompletes(), 32);
            });

            test("Routine getTotalTempsItemsRoutineNonCompletes 2-1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.FINI_SUCCES);
            	equal(p.getTotalTempsItemsRoutineNonCompletes(), 17);
            });

            function setUpGetTempsLibre() {
            	var dateFin = new Date(1993, 06, 09, 21, 00);
            	p.setDateFin(dateFin);
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            }

            test("Routine getTempsLibre 1", function() {
                setUpGetTempsLibre();
            	equal(p.getTempsLibreSecondes(new Date(1993, 06, 09, 20, 00)), 1680);
            });

            test("Routine getTempsLibre 2", function() {
                setUpGetTempsLibre();
            	equal(p.getTempsLibreSecondes(new Date(1993, 06, 09, 20, 08)), 1200);
            });

            test("Routine getTempsLibre 3", function() {
                setUpGetTempsLibre();
            	equal(p.getTempsLibreSecondes(new Date(1993, 06, 09, 21, 00)), 0);
            });

            test("Routine getTempsLibre 4", function() {
                setUpGetTempsLibre();
            	equal(p.getTempsLibreSecondes(new Date(1993, 06, 09, 20, 28)), 0);
            });

            test("Routine getTempsLibre 5", function() {
                setUpGetTempsLibre();
            	equal(p.getTempsLibreSecondes(new Date(1993, 06, 09, 20, 27)), 60);
            });

            test("Routine estEnCoursItemRoutine faux vide", function() {
            	equal(p.estEnCoursItemRoutine(), false);
            });
            
            test("Routine estEnCoursItemRoutine faux 1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	equal(p.estEnCoursItemRoutine(), false);
            });

            test("Routine estEnCoursItemRoutine faux 2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.PAUSE);
            	equal(p.estEnCoursItemRoutine(), false);
            });
            
            test("Routine estEnCoursItemRoutine vrai", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.EN_COURS);
            	equal(p.estEnCoursItemRoutine(), true);
            });

            test("Routine getItemRoutineEnCours 0", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.EN_COURS);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();  
            	equal(itemRoutineEnCours.getTexte(), "Texte de l'item 0");
            });
            
            test("Routine getItemRoutineEnCours 1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(1);
            	itemRoutine.setStatut(statuts.EN_COURS);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();  
            	equal(itemRoutineEnCours.getTexte(), "Texte de l'item 1");
            });
            
            test("Routine getItemRoutineEnCours false", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutineEnCours = p.getItemRoutineEnCours();  
            	equal(itemRoutineEnCours, false);
            });

            test("Routine getNbrEtoiles 0-1", function() {  
            	equal(p.getNbrEtoiles(), 0);
            });
                        
            test("Routine getNbrEtoiles 0-2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));  
            	equal(p.getNbrEtoiles(), 0);
            });
            
            test("Routine getNbrEtoiles 0-2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 3));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.EN_COURS);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();  
            	equal(p.getNbrEtoiles(), 0);
            });
            
            test("Routine getNbrEtoiles 2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 2));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.FINI_SUCCES);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();  
            	equal(p.getNbrEtoiles(), 2);
            });
            
            test("Routine getNbrEtoiles 3-1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 2));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(1);
            	itemRoutine.setStatut(statuts.FINI_SUCCES);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();  
            	equal(p.getNbrEtoiles(), 3);
            });

            test("Routine getNbrEtoiles 3-2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 2));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.FINI_ECHEC);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();
            	var itemRoutine = p.getItemRoutine(1);
            	itemRoutine.setStatut(statuts.FINI_SUCCES);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();            	  
            	equal(p.getNbrEtoiles(), 3);
            });
            
            test("Routine getNbrEtoiles 5", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 2));
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 1", "routinePerso/images/itemsRoutine/dejeuner.jpg", 17, 3));
            	var itemRoutine = p.getItemRoutine(0);
            	itemRoutine.setStatut(statuts.FINI_SUCCES);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();
            	var itemRoutine = p.getItemRoutine(1);
            	itemRoutine.setStatut(statuts.FINI_SUCCES);
            	var itemRoutineEnCours = p.getItemRoutineEnCours();            	  
            	equal(p.getNbrEtoiles(), 5);
            });
	    
            test("Routine getNbrEtoilesRecompenseTotal 1", function() { 
            	equal(p.getNbrEtoilesRecompenseTotal(), 0);
                p = new Routine("Léanne", 5, 1, 1, 1);
                equal(p.getNbrEtoilesRecompenseTotal(), 5);
            });
	    
            test("Routine addNbrEtoilesRecompenseTotal 1", function() {
                p.addNbrEtoilesRecompenseTotal(10);
                equal(p.getNbrEtoilesRecompenseTotal(), 10);
            });
	    
            test("Routine estPretDebuter 0", function() {
            	equal(p.estPretDebuter(), false);
            });

            test("Routine estPretDebuter 1", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 2));
            	equal(p.estPretDebuter(), false);
            });

            test("Routine estPretDebuter 2", function() {
            	p.addItemRoutine(new ItemRoutine("Texte de l'item 0", "routinePerso/images/itemsRoutine/dejeuner.jpg", 15, 2));
                var dateFin = new Date(1993, 06, 09, 21, 00);
                p.setDateFin(dateFin);
            	equal(p.estPretDebuter(), true);
            });
	    
            test("Routine getIds 1", function() {
                equal(p.getIdFamille(), 1);
                equal(p.getIdEnfant(), 2);
                equal(p.getIdRoutine(), 3);
            });
            
        </script>
    </head>
    <body>
        <div id="qunit"></div>
    </body>
</html>
